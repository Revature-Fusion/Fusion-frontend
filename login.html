<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
     <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div class="wrapper">
        <h1>Welcome to our site</h1>
        <div id="form">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username"  placeholder="Enter your username" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter your password" required>
            </div>
            <button onclick="login()" id="login">Login</button>
            <button id="Home" onclick=window.location.href='home.html';>Home</button>
            <button id="register" onclick=window.location.href='registration.html';>Register</button>
        <span id="message"></span>
            </div>
            <br>
    </div>

    
</body>

<script>

    async function login() {

        console.log("Submitting.........")

        const usernameVal = document.getElementById("username").value
        const passwordVal = document.getElementById("password").value

        console.log(usernameVal)
        console.log(passwordVal)

        const data = {
            username: usernameVal,
            password: passwordVal
        }

        const url = "http://localhost:5000/login"

        const httpResponse = await fetch(url, {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)

        });


        const body = await httpResponse.json();

        window.location.reload();
        document.location.href = "index.html";
        sessionStorage.setItem('userdata', JSON.stringify(body))
    }


</script>
</html>